
{% extends 'app_front/partials/nav_bar.html' %}

{% block content %}


{{form_clientes.cliente.id}}
{{form_cliente.id}}
<div class="container">
  <!--ACTION E METHOD DO FORME CONTROLADO PELA VIEW PARA REAPROVEITAR O TEMPLATE-->
  <form class="row" action="{% url 'cadastrarvenda' %}" method="{{method_form}}"> {% csrf_token %}


    <div class="row g-1 p-1">

      <div class="col-md-1">
        <div class="form-floating">
          <input name="id" class="form-control" id="floatingInputGrid" placeholder="" value="{{form.id}}" readonly>
          <label for="floatingInputGrid">Id</label>
        </div>
      </div>
      
      <div class="col-md-11">
        <div class="form-floating">
            <select class="form-select" id="floatingSelect" name="cliente" {{block_select}}>
              
              
              <option value="{{form_cliente.id}}" selected>{{form_cliente.numero_identificacao}} - {{form_cliente.nome}}</option>
            
            

            {% for cliente in form_clientes %}
            <option value="{{cliente.id}}">{{cliente.numero_identificacao}} - {{cliente.nome}}</option>
            {% endfor %}
            {% for cliente in form %}
            <option value="{{cliente.id}}">{{cliente.numero_identificacao}} - {{cliente.nome}}</option>
            {% endfor %}
            </select>
            <label for="floatingSelect">Cliente</label>
        </div>
      </div>
 
    </div>   

    <div class="row g-1 p-1">

      <div class="col-md-4">
        <div class="form-floating">
          <input name="contato_venda" class="form-control" id="floatingInputGrid" placeholder="" value="{{form.id}}" readonly>
          <label for="floatingInputGrid">Contato</label>
        </div>
      </div>

      <div class="col-md-4">
        <div class="form-floating">
          <input name="telefone_venda" class="form-control" id="floatingInputGrid" placeholder="" value="{{form.id}}" readonly>
          <label for="floatingInputGrid">Telefone</label>
        </div>
      </div>

      <div class="col-md-4">
        <div class="form-floating">
          <button name="btn_abrir_venda" type="submit" class="btn btn-primary mb-3" value="true">Abrir Venda</button>
        </div>
      </div>
      
    </div> 

    <hr>

    <div class="row g-1 p-1">
       
        <div class="col-md-6">
            <div class="form-floating">
                <select class="form-select" id="floatingSelect" name="produto" {{block_select}}>
                    <option value="{{form_cliente.id}}" selected>{{form_cliente.numero_identificacao}} - {{form_cliente.nome}}</option>
                    
                    {% for produto in form_produtos %}
                        <option value="{{produto.id}}">{{produto.nome}}</option>
                    {% endfor %}
                </select>
                <label for="floatingSelect">Produto</label>
            </div>
          </div>

          <div class="col-md-1">
            <button name="btn_add_produto" type="submit" class="btn btn-primary mb-3" value="true">+</button>
          </div>

    </div>
    
    <div class="row g-1 p-1">

        <table class="table table-striped">
            <thead>
              <tr>
                <th scope="col" class="col-md-6">Produto</th>
                <th scope="col" class="col-md-2">Quantidade</th>
                <th scope="col" class="col-md-2">Valor Un.</th>
                <th scope="col" class="col-md-2">Valor Total</th>
                <th scope="col" class="col-md-6"></th>
              </tr>
            </thead>

            
              <tbody>
                <tr>
                    <td>
                      <!--<select class="form-select" id="floatingSelect" name="cliente" {{block_select}} onchange="location.href='{% url 'adicionaprodutovendaatual'%}'">--> <!--Quando selecionar produto enviar para uma pagina ler o produto e retornar na mesma pagina com o produto add-->
                        <select class="form-select" id="floatingSelect" name="cliente" {{block_select}}> 
                        <option value="{{form_produto.id}}" selected>{{form_produto.id}} </option>
                          
                          {% for produto in form_produtos %}
                            <option value="{{produto.id}}">{{produto.nome}}</option>
                          {% endfor %}
                          </select>
                    </td>
                    <td>
                        <input name="quantidade" type="text" class="form-control" id="floatingInputGrid" placeholder="" value="{{form.contato_chamado}}">
                    </td>
                    <td>
                        <input name="valor" type="text" class="form-control" id="floatingInputGrid" placeholder="" value="{{form.contato_chamado}}">
                    </td>
                    <td>
                        <input name="valor_total" type="text" class="form-control" id="floatingInputGrid" placeholder="" value="{{form.contato_chamado}}">
                    </td>
                    <td>  
                        <button name="btn_remove_produto" type="submit" class="btn btn-primary mb-3" id="add_produto" value = "true">-</button>
                    </td>
              </tr>
            </tbody>
            
        </table>
        
    </div>

    <div class="row g-1 p-1">
      
      <div class="d-grid gap-2">
          <button name="btn_gravar" class="btn btn-primary" type="submit">Gravar</button>
          <a href="{% url 'home' %}" class="btn btn-secondary">
            <button name="btn_cancelar" class="btn btn-secondary" type="button">Cancelar</button>
          </a>
      </div>
    </div>
  </form>

</div>

    {% endblock content %}
